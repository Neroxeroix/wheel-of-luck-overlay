<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Wheel of Luck</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body style="margin:0; overflow:hidden; background:transparent;">

  <!-- Debug visual -->
  <pre id="debug" style="
    position:absolute; top:1rem; left:1rem;
    padding:0.5rem; background:rgba(0,0,0,0.6);
    color:lime; font-size:.75rem; z-index:999;"></pre>

  <div id="container">
    <div id="pointer">⬆</div>
    <img id="wheel" src="wheel.png" alt="Wheel" />
    <div id="chosenNumber">
      <div id="resultNumber">--</div>
      <div id="resultMessage">Waiting...</div>
    </div>
  </div>

  <!-- 1) Carga el widget oficial de Ko-fi (solo JS válido) -->
  <script src="https://storage.ko-fi.com/cdn/scripts/overlay-widget.js"></script>

  <!-- 2) Inicializa tu overlay de stream alerts -->
  <script>
    kofiWidgetOverlay.draw('yalliwilliam', {
      type: 'stream',                   // stream alerts mode
      'stream.alert.duration': 5,       // segundos
      'stream.alert.text': '{from_name} tipped ${amount}: "{message}"'
    });
  </script>

  <!-- 3) Puente: captura los postMessage™ de Ko-fi y reemítelos aquí mismo -->
  <script>
    window.addEventListener('message', e => {
      if (e.data && e.data.type === 'donation') {
        // 3a) Muestra en el debug para confirmar que llega
        document.getElementById('debug').textContent =
          `[donation] $${e.data.amount} msg="${e.data.message}"`;

        // 3b) Reenvía a tu propio window para que script.js lo reciba
        window.postMessage(e.data, window.location.origin);
      }
    });
  </script>

  <!-- 4) Ahora carga tu lógica de la ruleta -->
  <script src="script.js"></script>
</body>
</html>


